<div class="modal-header">
  <h5 class="modal-title">Agregar Cliente</h5>
  <button type="button" class="btn-close" aria-label="Close" (click)="activeModal.dismiss('Cross click')"></button>
</div>

<div class="modal-body">
  <div class="container mt-3">
    <!-- Formulario con Template-Driven + validaciones -->
    <form #f="ngForm" (ngSubmit)="guardar()" novalidate>

      <div class="row">
        <!-- Nombre -->
        <div class="form-group mb-3 col-12 col-md-6">
          <label for="nombreCliente">Nombre del Cliente</label>
          <input
            type="text"
            id="nombreCliente"
            class="form-control"
            [(ngModel)]="clienteNuevo.nombre"
            name="nombre"
            placeholder="Nombre del cliente"
            required
            minlength="2"
            maxlength="100"
            pattern="^[A-Za-zÁÉÍÓÚáéíóúÑñÜü\s\.'-]+$"
            #nombre="ngModel"
            autocomplete="off"
          />
          <small class="text-danger" *ngIf="nombre.invalid && (nombre.dirty || nombre.touched)">
            <ng-container *ngIf="nombre.errors?.['required']">El nombre es requerido.</ng-container>
            <ng-container *ngIf="nombre.errors?.['minlength']">
              Debe tener al menos {{ nombre.errors?.['minlength']?.requiredLength }} caracteres.
            </ng-container>
            <ng-container *ngIf="nombre.errors?.['maxlength']">
              Máximo {{ nombre.errors?.['maxlength']?.requiredLength }} caracteres.
            </ng-container>
            <ng-container *ngIf="nombre.errors?.['pattern']">
              Solo letras, espacios y . ' - están permitidos.
            </ng-container>
          </small>
        </div>

        <!-- Apellido -->
        <div class="form-group mb-3 col-12 col-md-6">
          <label for="apellidoCliente">Apellido del Cliente</label>
          <input
            type="text"
            id="apellidoCliente"
            class="form-control"
            [(ngModel)]="clienteNuevo.apellido"
            name="apellido"
            placeholder="Apellido del Cliente"
            required
            minlength="2"
            maxlength="100"
            pattern="^[A-Za-zÁÉÍÓÚáéíóúÑñÜü\s\.'-]+$"
            #apellido="ngModel"
            autocomplete="off"
          />
          <small class="text-danger" *ngIf="apellido.invalid && (apellido.dirty || apellido.touched)">
            <ng-container *ngIf="apellido.errors?.['required']">El apellido es requerido.</ng-container>
            <ng-container *ngIf="apellido.errors?.['minlength']">
              Debe tener al menos {{ apellido.errors?.['minlength']?.requiredLength }} caracteres.
            </ng-container>
            <ng-container *ngIf="apellido.errors?.['maxlength']">
              Máximo {{ apellido.errors?.['maxlength']?.requiredLength }} caracteres.
            </ng-container>
            <ng-container *ngIf="apellido.errors?.['pattern']">
              Solo letras, espacios y . ' - están permitidos.
            </ng-container>
          </small>
        </div>
      </div>

      <div class="row">
        <!-- Dirección -->
        <div class="form-group mb-3 col-12 col-md-6">
          <label for="direccionCliente">Dirección</label>
          <input
            type="text"
            id="direccionCliente"
            class="form-control"
            [(ngModel)]="clienteNuevo.direccion"
            name="direccion"
            placeholder="Dirección del cliente"
            minlength="5"
            maxlength="200"
            #direccion="ngModel"
            autocomplete="off"
          />
          <!--<small class="text-danger" *ngIf="direccion.invalid && (direccion.dirty || direccion.touched)">
            <ng-container *ngIf="direccion.errors?.['required']">La dirección es requerida.</ng-container>
            <ng-container *ngIf="direccion.errors?.['minlength']">
              Debe tener al menos {{ direccion.errors?.['minlength']?.requiredLength }} caracteres.
            </ng-container>
            <ng-container *ngIf="direccion.errors?.['maxlength']">
              Máximo {{ direccion.errors?.['maxlength']?.requiredLength }} caracteres.
            </ng-container>
          </small>-->
        </div>

        <!-- Teléfono (SV: 8 dígitos iniciando con 2, 6 o 7) -->
        <div class="form-group mb-3 col-12 col-md-6">
          <label for="telefono">Teléfono</label>
          <input
            type="tel"
            id="telefono"
            class="form-control"
            [(ngModel)]="clienteNuevo.telefono"
            name="telefono"
            placeholder="Número de teléfono"
            pattern="^[267]\d{7}$"
            #telefono="ngModel"
            autocomplete="off"
          />
          <!--<small class="text-danger" *ngIf="telefono.invalid && (telefono.dirty || telefono.touched)">
            <ng-container *ngIf="telefono.errors?.['required']">El teléfono es requerido.</ng-container>
            <ng-container *ngIf="telefono.errors?.['pattern']">
              Formato inválido. Debe ser 8 dígitos e iniciar con 2, 6 o 7.
            </ng-container>
          </small>-->
        </div>
      </div>

      <div class="row">
        <!-- Correo Electrónico -->
        <div class="form-group mb-3 col-12 col-md-6">
          <label for="email">Correo Electrónico</label>
          <input
            type="email"
            id="email"
            class="form-control"
            [(ngModel)]="clienteNuevo.correo"
            name="correo"
            placeholder="Correo electrónico"
            maxlength="120"
            #correo="ngModel"
            autocomplete="off"
          />
          <!--<small class="text-danger" *ngIf="correo.invalid && (correo.dirty || correo.touched)">
            <ng-container *ngIf="correo.errors?.['required']">El correo es requerido.</ng-container>
            <ng-container *ngIf="correo.errors?.['email']">Formato de correo inválido.</ng-container>
            <ng-container *ngIf="correo.errors?.['maxlength']">
              Máximo {{ correo.errors?.['maxlength']?.requiredLength }} caracteres.
            </ng-container>
          </small>-->
        </div>

        <!-- DUI (formato: ########-#) -->
        <div class="form-group mb-3 col-12 col-md-6">
          <label for="dui">DUI</label>
          <input
            type="text"
            id="dui"
            class="form-control"
            [(ngModel)]="clienteNuevo.dui"
            name="dui"
            placeholder="DUI del Cliente"
            
            pattern="^\d{8}-\d$"
            #dui="ngModel"
            autocomplete="off"
          />
          <!--<small class="text-danger" *ngIf="dui.invalid && (dui.dirty || dui.touched)">
            <ng-container *ngIf="dui.errors?.['required']">El DUI es requerido.</ng-container>
            <ng-container *ngIf="dui.errors?.['pattern']">Formato inválido. Use ########-#</ng-container>
          </small>-->
        </div>
      </div>

      <div class="row">
        <!-- NIT (formato común SV: ####-######-###-#) -->
        <div class="form-group mb-3 col-12 col-md-6">
          <label for="nit">NIT</label>
          <input
            type="text"
            id="nit"
            class="form-control"
            [(ngModel)]="clienteNuevo.nit"
            name="nit"
            placeholder="NIT del cliente"
            pattern="^\d{4}-\d{6}-\d{3}-\d$"
            #nit="ngModel"
            autocomplete="off"
          />
          <!--<small class="text-danger" *ngIf="nit.invalid && (nit.dirty || nit.touched)">
            <ng-container *ngIf="nit.errors?.['required']">El NIT es requerido.</ng-container>
            <ng-container *ngIf="nit.errors?.['pattern']">Formato inválido. Use ####-######-###-#</ng-container>
          </small>-->
        </div>
      </div>

      <!-- Footer del form -->
      <div class="d-flex justify-content-end gap-2 mt-2">
        <button type="button" class="btn btn-secondary" (click)="activeModal.close('Close click')">Cerrar</button>
        <button type="submit" class="btn btn-primary" [disabled]="f.invalid || f.pending">
          Guardar Cliente
        </button>
      </div>

    </form>
  </div>
</div>

<div class="modal-footer d-none"><!-- reservado por compatibilidad --></div>
