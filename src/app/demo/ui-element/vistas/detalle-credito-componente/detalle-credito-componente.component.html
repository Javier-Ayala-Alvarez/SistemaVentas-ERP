<div class="container mt-4">

  <!-- Cabecera -->
  <div class="mb-3">
    <h6 >
      Detalle del Crédito: {{ nombre }}
    </h6>
  </div>

  <!-- Tabs -->
  <ul ngbNav #nav="ngbNav" class="nav-tabs">

    <!-- ================= TAB DEUDA ================= -->
    <li ngbNavItem="deuda">
      <button ngbNavLink>
        <i class="fas fa-exclamation-circle me-1"></i>
        Deuda actual
      </button>

      <ng-template ngbNavContent>
        <div class="card shadow-sm rounded mt-3">

          <div class="table-responsive" style="max-height: 350px; overflow-y: auto;">
            <table class="table table-hover align-middle mb-0">
              <thead class="table-light sticky-top">
                <tr class="text-center">
                  <th>Código</th>
                  <th>Fecha</th>
                  <th>Monto pendiente</th>
                </tr>
              </thead>

              <tbody class="text-center">
                <tr *ngFor="let data of creditos">
                  <td>{{ data.idOperaciones }}</td>
                  <td>{{ data.fechaElaboracion | date:'dd/MM/yyyy' }}</td>
                  <td class="text-danger fw-semibold">
                    {{ data.montoPagado | currency:'USD':'symbol':'1.2-2' }}
                  </td>
                </tr>

                <tr class="table-secondary fw-bold">
                  <td colspan="2" class="text-end">TOTAL</td>
                  <td class="text-danger">
                    {{ totalCredito | currency:'USD':'symbol':'1.2-2' }}
                  </td>
                </tr>
              </tbody>
            </table>
          </div>

          <!-- PAGINADOR DEUDA -->
          <nav class="mt-3 px-3 pb-3">
            <ul class="pagination justify-content-end mb-0">

              <li class="page-item disabled">
                <span class="page-link">
                  Página {{ page + 1 }} de {{ totalPages.length }}
                </span>
              </li>

              <li class="page-item" [class.disabled]="page === 0">
                <a class="page-link" style="cursor:pointer"
                   (click)="paginaAnterior()">
                  <i class="fas fa-angle-left"></i>
                </a>
              </li>

              <li class="page-item" [class.disabled]="page + 1 >= totalPages.length">
                <a class="page-link" style="cursor:pointer"
                   (click)="paginaSiguiente()">
                  <i class="fas fa-angle-right"></i>
                </a>
              </li>

            </ul>
          </nav>

        </div>
      </ng-template>
    </li>

    <!-- ================= TAB PAGOS ================= -->
    <li ngbNavItem="pagos">
      <button ngbNavLink>
        <i class="fas fa-check-circle me-1"></i>
        Pagos realizados
      </button>

      <ng-template ngbNavContent>
        <div class="card shadow-sm rounded mt-3">

          <div class="table-responsive" style="max-height: 350px; overflow-y: auto;">
            <table class="table table-hover align-middle mb-0">
              <thead class="table-light sticky-top">
                <tr class="text-center">
                  <th>Fecha</th>
                  <th>Monto pagado</th>
                  <th>Forma de pago</th>
                </tr>
              </thead>

              <tbody class="text-center">
              <!--  <tr *ngFor="let pago of pagosRealizados">
                  <td>{{ pago.fecha | date:'dd/MM/yyyy' }}</td>
                  <td class="text-success fw-semibold">
                    {{ pago.monto | currency:'USD':'symbol':'1.2-2' }}
                  </td>
                  <td>{{ pago.formaPago }}</td>
                </tr>

                <tr *ngIf="pagosRealizados?.length === 0">
                  <td colspan="3" class="text-muted">
                    No hay pagos registrados
                  </td>
                </tr>-->
              </tbody>
            </table>
          </div>

          <!-- PAGINADOR PAGOS -->
          <nav class="mt-3 px-3 pb-3">
            <ul class="pagination justify-content-end mb-0">

            <!--  <li class="page-item disabled">
                <span class="page-link">
                  Página {{ pagosPage + 1 }} de {{ pagosTotalPages.length }}
                </span>
              </li>

              <li class="page-item" [class.disabled]="pagosPage === 0">
                <a class="page-link" style="cursor:pointer"
                   (click)="paginaAnteriorPagos()">
                  <i class="fas fa-angle-left"></i>
                </a>
              </li>

              <li class="page-item" [class.disabled]="pagosPage + 1 >= pagosTotalPages.length">
                <a class="page-link" style="cursor:pointer"
                   (click)="paginaSiguientePagos()">
                  <i class="fas fa-angle-right"></i>
                </a>
              </li>-->

            </ul>
          </nav>

        </div>
      </ng-template>
    </li>

  </ul>

  <div [ngbNavOutlet]="nav"></div>

  <!-- Footer -->
  <div class="d-flex justify-content-end gap-2 mt-3">
    <button class="btn btn-outline-secondary btn-sm"
            (click)="activeModal.dismiss()">
      <i class="fas fa-times me-1"></i>
      Cerrar
    </button>

    <button class="btn btn-primary btn-sm"
            (click)="pagarTodo()"
            [disabled]="totalCredito === 0">
      <i class="fas fa-dollar-sign me-1"></i>
      Pagar
    </button>
  </div>

</div>
