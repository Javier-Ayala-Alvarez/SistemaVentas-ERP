<!-- HEADER -->
<div class="modal-header text-white">
  <h5 class="modal-title">
    <i class="fas fa-ruler-combined me-2"></i>
    Seleccionar unidad de medida
  </h5>
  <button
    type="button"
    class="btn-close btn-close-white"
    (click)="activeModal.dismiss()"
  ></button>
</div>

<!-- BODY -->
<div class="modal-body p-4">

  <!-- FILTROS -->
  <div class="card mb-3 border-0 shadow-sm">
    <div class="card-body">
      <div class="row g-2">
        <div class="col-md-3">
          <input class="form-control form-control-sm"
                 placeholder="C칩digo"
                 [(ngModel)]="filtroCodigo"
                 (input)="loadUnidadMedida()" />
        </div>
        <div class="col-md-3">
          <input class="form-control form-control-sm"
                 placeholder="Nombre"
                 [(ngModel)]="filtroNombre"
                 (input)="loadUnidadMedida()" />
        </div>
        <div class="col-md-3">
          <input class="form-control form-control-sm"
                 placeholder="Abreviatura"
                 [(ngModel)]="filtroAbreviatura"
                 (input)="loadUnidadMedida()" />
        </div>
        <div class="col-md-3">
          <input class="form-control form-control-sm"
                 placeholder="Factor"
                 [(ngModel)]="filtroFactor"
                 (input)="loadUnidadMedida()" />
        </div>
      </div>
    </div>
  </div>

  <!-- TABLA -->
  <div class="table-responsive shadow-sm rounded">
    <table class="table table-hover align-middle mb-0">
      <thead class="table-light">
        <tr>
          <th (click)="ordenarPor('id')" class="cursor-pointer">
            C칩digo
            <i class="fas ms-1"
               [ngClass]="order === 'id' ? (asc ? 'fa-sort-up' : 'fa-sort-down') : 'fa-sort'">
            </i>
          </th>
          <th (click)="ordenarPor('nombre')" class="cursor-pointer">
            Nombre
            <i class="fas ms-1"
               [ngClass]="order === 'nombre' ? (asc ? 'fa-sort-up' : 'fa-sort-down') : 'fa-sort'">
            </i>
          </th>
          <th>Abreviatura</th>
          <th>Factor</th>
          <th class="text-center">Acci칩n</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let data of unidadMedida">
          <td>{{ data.id }}</td>
          <td>
            <strong>{{ data.nombre }}</strong>
          </td>
          <td>
            <span class="badge bg-secondary">
              {{ data.abreviatura }}
            </span>
          </td>
          <td>{{ data.factor }}</td>
          <td class="text-center">
            <button
              class="btn btn-outline-success btn-sm"
              (click)="guardar(data)"
              title="Seleccionar unidad"
            >
              <i class="fas fa-check"></i>
              Seleccionar
            </button>
          </td>
        </tr>

        <tr *ngIf="unidadMedida?.length === 0">
          <td colspan="5" class="text-center text-muted py-4">
            No se encontraron resultados
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- PAGINADOR -->
  <div class="d-flex justify-content-between align-items-center mt-3">
    <small class="text-muted">
      P치gina {{ page + 1 }} de {{ totalPages.length }}
    </small>

    <div class="btn-group">
      <button class="btn btn-outline-secondary btn-sm"
              (click)="paginaAnterior()"
              [disabled]="page === 0">
        <i class="fas fa-angle-left"></i>
      </button>
      <button class="btn btn-outline-secondary btn-sm"
              (click)="paginaSiguiente()"
              [disabled]="page + 1 >= totalPages.length">
        <i class="fas fa-angle-right"></i>
      </button>
    </div>
  </div>

</div>

<!-- FOOTER -->
<div class="modal-footer">
  <button
    type="button"
    class="btn btn-outline-secondary"
    (click)="activeModal.close()"
  >
    Cerrar
  </button>
</div>
